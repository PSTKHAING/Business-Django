{% extends 'user/components/base.html' %}
{% block title %}Post Create {% endblock %}
{% load static %}
{% block body %}

<form action="/business/post/create/" method="POST" enctype="multipart/form-data"
    class="col-xxl-6 col-xl-5 col-lg-8 mt-0 mt-lg-10 mt-xl-0 d-flex flex-column gap-7 cus-z">
    <div class="share-post d-flex gap-3 gap-sm-5 p-3 p-sm-5">
        <div class="w-100 position-relative">
            {% csrf_token %}
            <textarea cols="10" name="content" class="resize-none" rows="10"
                placeholder="Write something {{user.username}}.."></textarea>
        </div>
    </div>
    <div class="row">
        <div class="file-upload col-md-6 mt-3">
            <label class="file mt-1">
                <input type="file" name="image1" onchange="previewImage(this, 'preview1')" />
                <span class="file-custom border-0 d-grid text-center"
                    style="flex-direction: column;background-color: #2b3b58;height: 17rem;display: flex !important;justify-content: center;align-items: center;gap: 1rem;">
                    <img id="preview1" src="#" alt="Preview 1"
                        style="display: none; width: 100%; height: 100%; object-fit: cover;" />
                    <span class="material-symbols-outlined mat-icon fs-xxxl preview-icon">
                        perm_media
                    </span>
                    <span class="mdtxt preview-label">Photo - 1</span>
                </span>
            </label>

        </div>
        <div class="file-upload col-md-6 mt-3">
            <label class="file mt-1">
                <input type="file" name="image2" onchange="previewImage(this, 'preview2')" />
                <span class="file-custom border-0 d-grid text-center"
                    style="flex-direction: column;background-color: #2b3b58;height: 17rem;display: flex !important;justify-content: center;align-items: center;gap: 1rem;">
                    <img id="preview2" src="#" alt="Preview 2"
                        style="display: none; width: 100%; height: 100%; object-fit: cover;" />
                    <span class="material-symbols-outlined mat-icon fs-xxxl preview-icon">
                        perm_media
                    </span>
                    <span class="mdtxt preview-label">Photo - 2</span>
                </span>
            </label>

        </div>
        <div class="file-upload col-md-6 mt-3">
            <label class="file mt-1">
                <input type="file" name="image3" onchange="previewImage(this, 'preview3')" />
                <span class="file-custom border-0 d-grid text-center"
                    style="flex-direction: column;background-color: #2b3b58;height: 17rem;display: flex !important;justify-content: center;align-items: center;gap: 1rem;">
                    <img id="preview3" src="#" alt="Preview 3"
                        style="display: none; width: 100%; height: 100%; object-fit: cover;" />
                    <span class="material-symbols-outlined mat-icon fs-xxxl preview-icon">
                        perm_media
                    </span>
                    <span class="mdtxt preview-label">Photo - 3</span>
                </span>
            </label>

        </div>
        <div class="file-upload col-md-6 mt-3">
            <label class="file mt-1">
                <input type="file" name="image4" onchange="previewImage(this, 'preview4')" />
                <span class="file-custom border-0 d-grid text-center"
                    style="flex-direction: column;background-color: #2b3b58;height: 17rem;display: flex !important;justify-content: center;align-items: center;gap: 1rem;">
                    <img id="preview4" src="#" alt="Preview 4"
                        style="display: none; width: 100%; height: 100%; object-fit: cover;" />
                    <span class="material-symbols-outlined mat-icon fs-xxxl preview-icon">
                        perm_media
                    </span>
                    <span class="mdtxt preview-label">Photo - 4</span>
                </span>
            </label>

        </div>
    </div>
    <button type="submit" class="cmn-btn" style="max-width: max-content">
        Create
    </button>
</form>
<script>
    function previewImage(input, previewId) {
        const file = input.files[0];
        const preview = document.getElementById(previewId);
        const icon = preview?.closest('.file-custom')?.querySelector('.preview-icon');
        const label = preview?.closest('.file-custom')?.querySelector('.preview-label');

        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                preview.src = e.target.result;
                preview.style.display = 'block';

                if (icon) icon.style.display = 'none';
                if (label) label.style.display = 'none';
            };
            reader.readAsDataURL(file);
        } else {
            preview.src = '#';
            preview.style.display = 'none';
            if (icon) icon.style.display = 'block';
            if (label) label.style.display = 'block';
        }
    }
</script>

{% endblock %}